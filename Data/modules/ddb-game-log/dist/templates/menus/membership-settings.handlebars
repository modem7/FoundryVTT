<form name="ddb-game-log-membership-setup" class="flexcol" autocomplete="off">
    <h2 class="module-header">Your active membership</h2>
    <div class="form-group">
        <label>Current license</label>
        <div class="form-fields">        
            <input type="text" value="{{cap data/membership/name}}" readonly disabled/>
        </div>
        {{#if data/showLicenseWarning}}
            <p class="notes"><i class="fas fa-exclamation" style="margin-right: 8px;"></i>Cannot validate your license without setting up your <a style="color: blue;" onclick="javascipt: ddbgamelog.openMenu('core_settings');">Core Settings</a> properly.</p>
        {{/if}}
    </div>
    {{#if data/hasToken }}
    <div class="form-group">
        <label>Your token</label>
        <div class="form-fields">        
            <input type="text" value="{{data/token}}" readonly disabled/>
        </div>
        <p class="notes">If you found an issue please include this in support requests.<br/>Please <strong>do not share your token</strong> with anyone.</p>
    </div>
    {{else}}
        {{#if data/isValid}}
            {{#unless data/showLicenseWarning}}
                <div class="form-group">
                    <label>Your product key is valid until</label>
                    <div class="form-fields">        
                        <input type="text" value="{{data/expires}}" readonly disabled/>
                    </div>
                </div>
            {{/unless}}
        {{/if}}
    {{/if}}
    <br>
    <h2 class="module-header">Manage your membership</h2>
    {{#if data/hasToken}}
        <div class="form-group submenu">
            <label>Choose a package which fits you the most</label>
            <button type="button" name="ddb-game-log.membership-upgrade-button" onclick="javascript: window.open('{{data/patreonUrl}}', '_blank');">
                <i class="fas fa-credit-card"></i>
                <label>Manage your membership</label>
            </button>
        </div>
    {{else}}
        <div class="form-group submenu">
            <label>Unlock extra rewards</label>
            <button type="button" name="ddb-game-log.membership-upgrade-button" onclick="javascript: window.open('{{data/patreonUrl}}', '_blank');">
                <i class="fas fa-star"></i>
                <label>Become a member</label>
            </button>
        </div>
    {{/if}}

    {{#if data/hasToken}}
        <div class="form-group submenu">
            <label>Disconnect from Patreon</label>
            <button type="button" name="ddb-game-log.deauthorize-patreon-button" onclick="javascript: {{data/deauthFn}};">
                <i class="fas fa-plug"></i>
                <label>Deauthorize</label>
            </button>
        </div>
    {{else}}
        <div class="form-group submenu">
            <label>Connect with patreon</label>
            <button type="button" name="ddb-game-log.connect-with-patreon-button" onclick="javascript: window.open('{{data/authUrl}}', '_blank');" {{#if data/showLicenseWarning}}disabled{{/if}}>
                <i class="fas fa-plug"></i>
                <label>Authorize</label>
            </button>
            {{#if data/showLicenseWarning}}<p class="notes"><i class="fas fa-exclamation" style="margin-right: 8px;"></i>You cannot authorize with Patreon without setting up your <a style="color: blue;" onclick="javascipt: ddbgamelog.openMenu('core_settings')">Core Settings</a> properly.</p>{{/if}}
        </div>
    {{/if}}
    <br>
    {{#unless data/hasToken}}
        <h2 class="module-header">Are you an Authorized Beta Tester?</h2>
        <div class="form-group submenu">
            <label>Beta tester product key</label>
            <input type="text" value="{{data/productKey}}" name="ddb-game-log._productKey" placeholder="Enter your beta tester product key here..." {{#if data/showLicenseWarning}}disabled{{/if}}/>
            {{#if data/showLicenseWarning}}<p class="notes"><i class="fas fa-exclamation" style="margin-right: 8px;"></i>You cannot use your product key without setting up your <a style="color: blue;" onclick="javascipt: ddbgamelog.openMenu('core_settings')">Core Settings</a> properly.</p>{{/if}}
        </div>
        <br>
    {{/unless}}
    <h2 class="module-header">Supporting the development</h2>
    <p class="notification info">
        If you would like to support the development of the module please click on the <strong>Become a member</strong> button first, so you can see what I can offer in return for your support.<br><br>
        * It is very important to mention that getting a paid membership <strong>is not mandatory</strong> to use the module but some of the features are not available without an active membership.<br><br>
        * You can activate the purchased membership by clicking the <strong>Authorize</strong> button.
    </p>
    <br>
    <h2 class="module-header">Known issues with Patreon</h2>
    <p class="notification warning">
        Every 1st day of a month is a payout day at Patreon and their servers are fully overloaded. 
        During this time (they say it can be 24-48 hours) your subscription is not always confirmed and/or working because of their API even if Patreon says that. If this case happens I can provide a license key (valid for 3 days) for you to be able to use your subscription until they resurrects their servers. <br>Please send me a DM on discord if this happens.
    </p>
    <br>
    <footer class="sheet-footer flexrow">
        <button type="submit" name="submit">
            <i class="far fa-exit"></i> Close window
        </button>
    </footer>
</form>

